define(["controllers/controllers","config"],function(e,t){e.controller("playersCtrl",["$scope","$timeout",function(e,n){e.positions=t.app.positions,e.player={},e.players=[],e.teams=[];var r=e.$bus.channel("players"),i=e.$bus.channel("teams");n(function(){i.publish("teams.list",function(t){e.teams=t})}),r.subscribe("players.team.refresh",function(){i.publish("teams.list",function(t){e.teams=t})}),e.Player={list:function(){e.promised="Loading players list...",r.request({topic:"players.promised.list",timeout:20}).then(function(t){e.players=t.list,e.promised="Players list loaded @ "+t.envelope.timeStamp},function(t){e.promised="Uh oh! Error: "+t})},save:function(t){r.publish({topic:"players.save",data:{player:t,callback:function(){this.list()}.bind(this)}}),e.player={}},remove:function(e){r.publish({topic:"players.remove",data:{id:e,callback:function(){this.list()}.bind(this)}})},edit:function(t){e.player=angular.extend({},t)}},n(function(){e.Player.list()}),e.clearForm=function(){e.player={}};var s=e.$bus.channel("testing");s.subscribe({topic:"tested.method",callback:function(e,t){}})}])});