extends layout

block app-content

	.row-fluid(ng-controller='club')

		.col-md-2
			h3 Player
			hr

			form(role='form',
			ng-submit='savePlayer(player)')

				.form-group
					label(for='name') Name
					input#name.form-control(type='text',
					placeholder='Enter name',
					ng-model='player.name')

				.form-group
					label(for='position') Position
					select.form-control(ng-model='player.position',
					ng-options='position for position in positions')
						option(value='') Choose a position

				.form-group
					label(for='goals') Goals
					.row
						.col-xs-6
							input#goals.form-control(type='number',
							placeholder='Goals',
							min='0',
							max='120',
							ng-model='player.goals')

				button.btn.btn-default(type='submit') Save

				button.btn.btn-link(type='reset',
				ng-show='player.name',
				ng-click='clearForm()') Clear form

		.col-md-6
			h3 Team
			hr

			.panel

				.panel-body(ng-hide='players.length > 0')
					p There are no players. Please add some.

				.panel-body(ng-show='players.length > 0')
					table.table.table-hover.ng-cloak
						thead
							tr
								th ID
								th Name
								th Position
								th Goals
								th Actions

						tbody
							tr(ng-repeat='player in players')
								td {{player.id}}
								td {{player.name}}
								td {{player.position}}
								td {{player.goals}}
								td
									.btn-group-sm
										button.btn.btn-default.btn-sm(ng-click='editPlayer(player)') edit
										button.btn.btn-default.btn-sm(ng-click='deletePlayer(player.id)') delete

			span: small {{promised}}


		.col-md-4
			h3 Events
			hr

			.list-group
				a.list-group-item(href='#', ng-repeat='log in logs', ng-click='log.fold=!log.fold')

					span.glyphicon.glyphicon-chevron-up.pull-right(ng-show='log.fold')
					span.glyphicon.glyphicon-chevron-down.pull-right(ng-hide='log.fold')

					h4.list-group-item-heading
						span.label.label-warning {{log.channel}}
						| &nbsp;{{log.topic}}

					p.list-group-item-text {{log.timeStamp | date:'MM-dd-yyyy H:mm:ss'}}

					div(ng-show='log.fold')
						hr
						dl.dl-horizontal
							span(ng-repeat='(key, value) in log.data')
								dt {{key}}
								dd {{value | json}}